<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>demo&#x2F;todo&#x2F;todo.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Controller.html">Controller</a></li>
            
                <li><a href="..&#x2F;classes/getSetHtml.html">getSetHtml</a></li>
            
                <li><a href="..&#x2F;classes/List.html">List</a></li>
            
                <li><a href="..&#x2F;classes/ModelView.html">ModelView</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/JSON.html">JSON</a></li>
            
                <li><a href="..&#x2F;modules/MVC.html">MVC</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: demo&#x2F;todo&#x2F;todo.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
$(function() {
  &#x2F;**
   * Implementation of three different methods, which will automatically get
   * bound to the view.
   *&#x2F;
  var notebookController = MVC.Controller({
    &#x2F;&#x2F;Button clear done will clear the done notes
    clearDone : function() {
      notebook.clearDone();
    },
    &#x2F;&#x2F;Button clear all will clear all notes
    clearAll : function() {
      notebook.clearAll();
    },
    &#x2F;&#x2F;Button export json will generate a file containing the notebooks notes as json objects
    exportJSON : function() {
      var data = {};
      $.each(notebook.getNotes(), function(k, v) {
        data[k] = v.GetModelData();
      });
      JSON.save(JSON.stringify(data, null, 2),
          function(data) {
            $(&#x27;#jsonFileUrl&#x27;).html(&#x27;&lt;a href=&quot;&#x27;+data[&#x27;url&#x27;]+&#x27;&quot;&gt;Open the JSON file.&lt;&#x2F;a&gt;&#x27;);
          }
        );
    }
  });
  
  &#x2F;&#x2F;The Model&#x27;s data for the notebook
  var notebookData = {
    notes: MVC.List() &#x2F;&#x2F;Use our MVC Array with extra methods
  };
  
  &#x2F;&#x2F;Define extra functionality for the notebook object, by implementing new
  &#x2F;&#x2F;functions&#x2F;methods here.
  var notebookMethods = {
    &#x2F;**
     * Is the input data entered valid?
     *&#x2F;
    isValidInput : function(data) {
      return $.trim(data).length &gt; 0;
    },
    &#x2F;**
     * Create a new note
     *&#x2F;
    createNote : function(value, isComplete, id) {
      &#x2F;&#x2F;Only if the note has some text
      if(notebook.isValidInput(value)) {
       
        var noteData = {
          id: (id === undefined || id === null ? Date.now() : id),
          isComplete: isComplete,
          note: value
        };
        
        &#x2F;&#x2F;The note data (it&#x27;s field members and methods)
        var noteMethods = {
          save : function() {
            store.save(note.Get(&#x27;id&#x27;), note.GetModelData()); &#x2F;&#x2F;Store the data
          },
          toggleMode : function() {
            &#x2F;&#x2F;don&#x27;t toggle modes if the note is done
            if(!note.Get(&#x27;isComplete&#x27;)) {
              note
                .Find(&#x27;#note&#x27;)
                .toggle(500);
              note
                .Find(&#x27;:input[name=&quot;note&quot;]&#x27;)
                .toggle(500, function(){
                  $(this).focus();
                });
            }
          },
          init : function() {
            note
              .Find(&#x27;#note&#x27;)
              .click(function() {
                note.toggleMode();
              });
          }
        };
       
        &#x2F;&#x2F;The note controller for the GUI buttons
        var noteController = MVC.Controller({
          showData : function() {
            alert(JSON.stringify(note.GetModelData(), null, 2));
          }
        });
        
        &#x2F;&#x2F;
        var noteSettings = {
          controller: noteController,
          change: function(e, n, v) {
            note
              .save(); &#x2F;&#x2F;save the note
            notebook
              .onCheckNote(note);
          },
          keyup: function(e, n, v) {
            if(notebook.isValidInput(v)) {
              if(MVC.KeyCheck(e, &#x27;enter&#x27;)) {
                note
                  .save(); &#x2F;&#x2F;save the note
                note
                  .toggleMode(); &#x2F;&#x2F;Toggle to view mode again
              }
              if(MVC.KeyCheck(e, &#x27;escape&#x27;)) {
                if(notebook.isValidInput(note)) {
                  note
                    .Find(&#x27;:input[name=&quot;note&quot;]&#x27;)
                    .blur();
                }
              }
            }
          },
          blur: function() {
            note
              .toggleMode();
          },
          clone: {
              id: &#x27;#liNoteElem&#x27;+Date.now(),
              withDataAndEvents: false,
              append: function(elem) {
                $(&#x27;#note-list&#x27;).prepend(elem);
                $(elem).show();
              }
          }
        };
        
        &#x2F;&#x2F;Create a new note using the MVC ModelView
        &#x2F;&#x2F;var note = MVC.ModelView(&#x27;#list-template&#x27;, noteData, noteSettings, noteMethods);
        var note = $(&#x27;#list-template&#x27;).ModelView(noteData, noteSettings, noteMethods);
        
        notebook.add(note);
      }
      return notebook;
    },
    add : function(note) {
      notebook
          .getNotes() &#x2F;&#x2F;Retrieve the list of notes
          .Add(note); &#x2F;&#x2F;Add the note to the notebook
          
      notebook
          .onAddRemove(note) &#x2F;&#x2F;Update databound elements
          .onCheckNote(note); &#x2F;&#x2F;Update databound elements
          
      store
        .save(note.Get(&#x27;id&#x27;), note.GetModelData()); &#x2F;&#x2F;Store the data
        
      return notebook;
    },
    remove : function(note) {
      var isRemoved = notebook
                        .getNotes() &#x2F;&#x2F;Get the list of notes (Array)
                        .Remove(note); &#x2F;&#x2F;Remove the note (from the Array)
      if(isRemoved) {
        notebook
          .onAddRemove(note) &#x2F;&#x2F;Update databound elements
          .onCheckNote(note) &#x2F;&#x2F;Update databound elements
          .focusInput();
          
        store
          .remove(note.Get(&#x27;id&#x27;)); &#x2F;&#x2F;Remove the note (from the storage)
      }
      return notebook;
    },
    getNotes : function() {
      return notebook.Get(&#x27;notes&#x27;);
    },
    getNotesDone : function() {
      var notesDone = MVC.List();
      $.each(notebook.getNotes(), function(i, note) {
        if(note.Get(&#x27;isComplete&#x27;)) {
          notesDone.Add(note);
        }
      });
      return notesDone;
    },
    getNotesCount : function() {
      return notebook.getNotes().length;
    },
    getNotesDoneCount : function() {
      return notebook.getNotesDone().length;
    },
    clearDone : function() {
      $.each(notebook.getNotes(), function(k, note) {
        if(note.Get(&#x27;isComplete&#x27;)) {
          $(note.GetViewId()).slideUp(&#x27;slow&#x27;, function() {
            notebook.remove(note); &#x2F;&#x2F;Remove the note the Model
            $(this).remove(); &#x2F;&#x2F;Remove the note from the View
            &#x2F;&#x2F;console.log(&quot;Notes count: &quot; + notebook.getNotes().length);
          });
        }
      });
      return notebook;
    },
    clearAll : function(isCompleteFilter) {
      $.each(notebook.getNotes(), function(k, note) {
        $(note.GetViewId()).slideUp(&#x27;slow&#x27;, function() {
          notebook.remove(note); &#x2F;&#x2F;Remove the note the Model
          $(this).remove(); &#x2F;&#x2F;Remove the note from the View
          &#x2F;&#x2F;console.log(&quot;Notes count: &quot; + notebook.getNotes().length);
        });
      });
      return notebook;
    },
    focusInput : function() {
      notebook
        .Find(&#x27;.create&#x27;)
        .val(&#x27;&#x27;)
        .focus();
    },
    loadNotes : function() {
      var notesFromStore = store.getAll();
      $.each(notesFromStore, function(k,v) {
        notebook.createNote(v[&#x27;note&#x27;], v[&#x27;isComplete&#x27;], k);
      });
    },
    clear : function() {
      store.clear();
      return notebook.clearAll();
    },
    onAddRemove : function(note) {
      $(&#x27;.notesCountText&#x27;).html(notebook.getNotesCount() === 1 ? &#x27;item&#x27; : &#x27;items&#x27;);
      $(&#x27;#notesCount&#x27;).html(notebook.getNotesDoneCount() + &#x27; &#x2F; &#x27; + notebook.getNotesCount());
      return notebook;
    },
    onCheckNote : function(note) {
      var noteElem = note.Find(&#x27;#note&#x27;);
      var notesDone = notebook.getNotesDoneCount();
      
      if(note.Get(&#x27;isComplete&#x27;)) {
        noteElem.addClass(&#x27;isComplete&#x27;);
      } else {
        noteElem.removeClass(&#x27;isComplete&#x27;);
      }
      
      if(notesDone &gt; 0) {
        $(&#x27;#clearDone&#x27;).fadeIn(500);
      }
      else {
        $(&#x27;#clearDone&#x27;).fadeOut(500);
      }
      
      $(&#x27;.notesDone&#x27;).html(notesDone === 1 ? &#x27;item&#x27; : &#x27;items&#x27;);
      $(&#x27;#notesDone&#x27;).html(notesDone);
      $(&#x27;#notesCount&#x27;).html(notesDone + &#x27; &#x2F; &#x27; + notebook.getNotesCount());
      printDebug();
      return notebook;
    },
    init : function() {
      notebook.focusInput();
      notebook.loadNotes();
    }
  };
  
  &#x2F;&#x2F;Settings
  var notebookSettings = {
    controller: notebookController,
    keyup : function(e, n, v) {
      printDebug();
      if(n === &#x27;create&#x27;) {
        if(MVC.KeyCheck(e, &#x27;enter&#x27;)) {
          $(e.target).val(&#x27;&#x27;); &#x2F;&#x2F;Clear the input
          notebook.createNote(v, false);
          &#x2F;&#x2F;notebook.RunCtr(&#x27;createNote&#x27;, {value:v, isComplete:false}) &#x2F;&#x2F;Add the note
        }
      }
      notebook.SetModelFromView();
      &#x2F;&#x2F;notebook.SetViewFromModel();
    }
    
  };
  
  &#x2F;&#x2F;Create a notebook (object literal) which manages the todo notes
  &#x2F;&#x2F;var notebook = MVC.ModelView(&#x27;#todos&#x27;,
  var notebook = $(&#x27;#todos&#x27;).ModelView( notebookData, notebookSettings, notebookMethods );
  
  &#x2F;&#x2F;Clear the notebook and add 3 notes
  &#x2F;*notebook
    .clear()
    .createNote(&#x27;Buy some milk&#x27;, true)
    .createNote(&#x27;Drink the milk&#x27;, false)
    .createNote(&#x27;Open lifehacker.com&#x27;, false);
  *&#x2F;
  
});



function printDebug() {
  &#x2F;*DebugObj(&#x27;#debug&#x27;, {
    o1 : {
      object : notebook,
      readDom : true
    }
  });*&#x2F;
}
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
