<!DOCTYPE html>

<html>
<head>
  <title>simple.mvc.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>simple.mvc.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>==========================================================================</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Project:   Simple JavaScript MVC / MVVM
Copyright: ©2012 Benjamin Hammer (hammerbenjamin@gmail.com)
License:   Licensed under MIT license (see LICENCE.MD)</p>
<h1 id="to-minify-http-localhost-minify-min-f-simplemvc-simple-mvc-js">To minify: <a href="http://localhost/minify/min/?f=simplemvc/simple.mvc.js">http://localhost/minify/min/?f=simplemvc/simple.mvc.js</a></h1>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * Provides the core MVC classes: Controller &amp; ModelView
 *
 * #1 Design Rule - Capitalization
 *
 * Internal methods (except the .toArray() method) have the first letter
 * capitalized. This is by design for two reasons:
 *
 *  1) JavaScript has many built in methods which already 'belong' to an object
 *     so this is a good 'solution' which makes it possible to use methods such
 *     as .Delete() (as .delete wouldn't be valid in JavaScript).
 *
 * 2) To distinguish between the object's and JS built-in and 'custom' (passed
 *   with the object data when a ModelView instance is created) methods.
 *
 * #2 Design Rule - Bracket vs Dot notation
 *
 * Internet Explorer (not all) don't like when an element/property in an
 * object literal or array is being accessed using dot notation. Even though
 * it's generally encouraged (e.g. www.jshint.com) to use the dot notation,
 * this would very likely break when evaluated in IE! Therefore all
 * elements/properties should be accessed associatively with Bracket notation:
 *  obj = {foo : 'bar'}; //An object literal (JSON)
 *  obj = {foo : 'bar'};
 *  obj['foo']; //(OK!)
 *  obj.foo; //(Breaks in IE (older versions)
 *  obj.someMethod(); //(OK! - also in IE!)
 *
 *
 * Some helpful links:
 * http://viralpatel.net/blogs/20-top-jquery-tips-tricks-for-jquery-programmers/
 *
 *
 * @module MVC
 * @main MVC
 */</span>
<span class="hljs-keyword">var</span> MVC = {
  <span class="hljs-comment">/**
   * KeyCheck
   *
   * A human way to check which key was used.
   * This is supposed to simulate a static method known from other languages such as Java.
   *
   * @method KeyCheck
   * @param {Object} e Event
   * @param {String} n Name of the key to check against (e.g. 'enter', 'escape')
   */</span>
  KeyCheck : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e, n</span>) </span>{
    <span class="hljs-keyword">if</span>(e.keyCode === <span class="hljs-number">13</span> &amp;&amp; (n === <span class="hljs-string">'enter'</span> || n === <span class="hljs-string">'return'</span>)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(e.keyCode === <span class="hljs-number">27</span> &amp;&amp; n === <span class="hljs-string">'escape'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },
  <span class="hljs-comment">/**
   * List
   *
   * A more human way of handling array's in JavaScript. it extends the array
   * (currently) with two extra methods which makes it more easy and semantic
   * when adding and removing elements using .Add() and .Remove() methods
   * respectively.
   *
   * @class List
   * @param {Object} An array (is optional)
   */</span>
  List : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">array</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>If the optional paramater ‘array’ hasn’t been specified, then create an
empty Array.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span>(array === <span class="hljs-literal">null</span> || array === <span class="hljs-literal">undefined</span>) {
      array = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>console.log(“new array”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>If the input array is an object literal, then convert it to an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!$.isArray(array) &amp;&amp; <span class="hljs-keyword">typeof</span>(array) === <span class="hljs-string">'object'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>array = $.makeArray(array);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> newArray = [], i = <span class="hljs-number">0</span>;
      $.each(array, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k, v</span>) </span>{
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> v !== <span class="hljs-string">'function'</span>) {
          newArray[i] = v;
          i++;
        }
      });
      array = newArray;
    }

    <span class="hljs-comment">/**
     * Size
     *
     * Return the length of the array (same as array.length);
     * @return {Number} The length of the array.
     */</span>
    array.Size = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> array.length;
    };

    <span class="hljs-comment">/**
     * Add
     *
     * Add a new element - It's more semantic to use .Add() instead of .push().
     *
     * @method Add
     * @param {Object} An element.
     * @return {Array} The array.
     */</span>
    array.Add = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
      array.push(element);
      <span class="hljs-keyword">return</span> array;
    };

    <span class="hljs-comment">/**
     * Get
     *
     * Get an element from the array.
     *
     * @method Get
     * @param {Integer} A key.
     * @return {Object} An object from the array.
     */</span>
    array.Get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) </span>{
      <span class="hljs-keyword">return</span> array[key];
    };

    <span class="hljs-comment">/**
     * Find
     *
     * Find an element in the array.
     *
     * @method GetById
     * @param {Object} A key.
     * @param {Object} A value to search for.
     * @return {Object} An object from the array.
     */</span>
    array.Find = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_key, _value</span>) </span>{
      <span class="hljs-keyword">var</span> result;
      $.each(array, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k,v</span>) </span>{
        <span class="hljs-keyword">if</span>(v[_key] === _value) {
          result = v;
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      });
      <span class="hljs-keyword">return</span> result;
    };

    <span class="hljs-comment">/**
     * Remove
     *
     * Remove an element (if found) from the array.
     *
     * @method Remove
     * @param {Object} An element.
     */</span>
    array.Remove = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>More about deleting elements from an array in JavaScript:
<a href="http://stackoverflow.com/questions/500606/javascript-array-delete-elements">http://stackoverflow.com/questions/500606/javascript-array-delete-elements</a>
indexOf breaks in IE &lt; 9!
var i = array.indexOf(element);
Solution:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> i = $.inArray(element, array);
      <span class="hljs-keyword">if</span>(i !== <span class="hljs-number">-1</span>) {
        array.splice(i, <span class="hljs-number">1</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>console.log(‘removed ‘ + element + ‘ from array’);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    };

    <span class="hljs-comment">/**
     * RemoveAt
     *
     * Remove an element at index (if found) from the array.
     *
     * @method RemoveAt
     * @param {Integer} Index.
     */</span>
    array.RemoveAt = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">index</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.Remove(<span class="hljs-keyword">this</span>.Get(index));
    };

    <span class="hljs-comment">/**
     * Contains
     *
     * Check if the specified element is in the list
     *
     * @method Contains
     * @param {Object} An element.
     */</span>
    array.Contains = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
      <span class="hljs-keyword">return</span> $.inArray(element, array) !== <span class="hljs-number">-1</span>;
    };

    <span class="hljs-comment">/**
     * Clear
     *
     * Remove all the elements from the array.
     *
     * @method Clear
     */</span>
    array.Clear = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>array.splice(0, array.length);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      array = [];
    };
    <span class="hljs-keyword">return</span> array;
  },
  <span class="hljs-comment">/**
   * Controller which handles the logic, such as saving, updating or deleting
   * the object.
   *
   * Defintion
   * Controller: The controller interprets the mouse and keyboard inputs from the user,
   * informing the model and/or the view to change as appropriate.
   * Source: http://bit.ly/fQnaJI
   *
   * For the time being the Controller class doesn't do much more than returning
   * the same data as entered (JSON) object literal. Still this is by design, as
   * there is a possibility for the 'controller' to do more than this 'stuff'
   * (handling more than returning data) in the future.
   *
   *
   * @class Controller
   * @constructor
   */</span>
  Controller : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
    <span class="hljs-keyword">return</span> data;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>ModelView has code is now written as a jQuery plugin: simple.mvc.jquery.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>};

<span class="hljs-comment">/**
 * ModelView written as a jQuery plugin (most basic form of plugin authoring).
 *
 * Reasons for this:
 *  Several ;), but mainly just trying to make it easier for anyone who already
 *  knows jQuery gettings started using Simplemvc.
 *
 * For more information on different jQuery plugin design patterns:
 * https://github.com/addyosmani/jquery-plugin-patterns/tree/master/patterns
 *
 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $ </span>) </span>{
  $.fn.extend({
    <span class="hljs-comment">/**
     * ModelView
     *
     * Definition:
     * Model: The model manages the behavior and data of the application domain,
     * responds to requests for information about its state (usually from the view),
     * and responds to instructions to change state (usually from the controller).
     * View: The view manages the display of information.
     * Source: http://bit.ly/fQnaJI
     *
     * ModelView creates the glue which binds the UI(View) with the Backend code
     * functionality of the program. It keeps the View synchronized with the 'Model'.
     *
     * ModelView creates a new object with data and settings. The data and
     * settings are (JSON) object literals and merged and returned after all the
     * internal setup is done.
     * The ModelView contains all the information about the object, which keeps
     * the View synchronized with the Model and vice versa.
     *
     * @class ModelView
     * @constructor
     *
     * @param {Object} $object   Model data
     * @param {Object} $settings Config &amp; view input events
     * @param {Object} $methods  Custom user defined methods/functions
    */</span>
    ModelView: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $object, $settings, $methods </span>) </span>{
      $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
      <span class="hljs-keyword">var</span> viewId = <span class="hljs-string">'#'</span>+$<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">'id'</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Make sure that the object data always exists. Only require ‘viewId’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(!$object) { <span class="hljs-comment">//$object === null || $object === undefined) {</span>
        $object = {};
      }
      <span class="hljs-keyword">else</span> {
        $object = $.extend({}, <span class="hljs-literal">true</span>, $object);
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Make sure that the object methods always exists. Only require ‘viewId’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(!$methods) { <span class="hljs-comment">//if($methods === null || $methods === undefined) {</span>
        $methods = {};
      }
      <span class="hljs-keyword">else</span> {
        $object = $.extend({}, <span class="hljs-literal">true</span>, $object, $methods);</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>$.extend($object, $settings, $methods);
alert(JSON.stringify($object, null, 2));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      }</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Make sure that the settings always exist and with certain properties.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(!$settings) { <span class="hljs-comment">//if($settings === null || $settings === undefined) {</span>
        $settings = {};
      }

      <span class="hljs-keyword">var</span> datasrc = $settings[<span class="hljs-string">'datasrc'</span>];
      <span class="hljs-keyword">var</span> clone = $settings[<span class="hljs-string">'clone'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>If cloning-‘functionality’ is specified…</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(clone !== <span class="hljs-literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Set the clone template to be the view id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        clone[<span class="hljs-string">'template'</span>] = viewId;</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Update the view id with the new clone id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(clone[<span class="hljs-string">'id'</span>] === <span class="hljs-literal">undefined</span>) {
          viewId = <span class="hljs-string">"#"</span> + $.now();
        }
        <span class="hljs-keyword">else</span> {
          viewId = <span class="hljs-string">''</span> + clone[<span class="hljs-string">'id'</span>]; <span class="hljs-comment">//Make sure it's a string</span>
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>If the clone view id has hashtag specified</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(viewId.substring(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>) === <span class="hljs-string">'#'</span>) {
          viewIdNoHash = viewId.substring(<span class="hljs-number">1</span>, viewId.length);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>if there’s no hashtag</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">else</span> {
          viewIdNoHash = viewId;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Clone the source and update the viewId</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> withDataAndEvents = $settings[<span class="hljs-string">'clone'</span>][<span class="hljs-string">'withDataAndEvents'</span>];
        withDataAndEvents = withDataAndEvents !== <span class="hljs-literal">undefined</span> ? withDataAndEvents : <span class="hljs-literal">false</span>;
        $settings[<span class="hljs-string">'clone'</span>][<span class="hljs-string">'withDataAndEvents'</span>] = withDataAndEvents;
        <span class="hljs-keyword">var</span> element = $($(clone[<span class="hljs-string">'template'</span>]).clone(withDataAndEvents))
                        .attr(<span class="hljs-string">'id'</span>, viewIdNoHash);</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>datasrc property to the settings, as it should be possible to create a
ModelView without any data, but solely relies on receiving updated
values from another view!
If the datasrc isn’t specified, then use the viewId as datasrc.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        datasrc = datasrc !== <span class="hljs-literal">undefined</span> ? datasrc : viewId;</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Update the datasrc with the new view id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $(element)</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>.find(viewId + ‘ li[datasrc=””]’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          .find(<span class="hljs-string">'[datasrc=""]'</span>)
          .attr(<span class="hljs-string">'datasrc'</span>, datasrc);</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>If the template originally was hidden using ‘display: none;’ - make it visible to the user
element.show();
Append the copy to the target
Execute the append callback function which normally would involve
appending and making it visible to the user (If the template originally was hidden using ‘display: none;’ - make it visible to the user)
e.g.
 Suppose we(you) in the callback function name the element ‘elem’:
 $(‘#someElementId’).append(elem); //append it
 $(elem).show();                   //make it visible</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        clone[<span class="hljs-string">'append'</span>](element); <span class="hljs-comment">//execute the callback function.</span>
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>TODO: Probably move these settings a little further up!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'viewId'</span>] === <span class="hljs-literal">undefined</span>) {
        $.extend($settings, {viewId : viewId});
      }
      <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'isMirror'</span>] === <span class="hljs-literal">undefined</span>) {
        $.extend($settings, {isMirror : <span class="hljs-literal">true</span>});
      }
      <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'eventUsed'</span>] === <span class="hljs-literal">undefined</span>) {
        $.extend($settings, {eventUsed : <span class="hljs-string">''</span>});
      }
      <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'preventDefault'</span>] === <span class="hljs-literal">undefined</span>) {
        $.extend($settings, {preventDefault : <span class="hljs-literal">true</span>});
      }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Attach events to the save, update, delete (more?) buttons/submit.
For IE we need to specify each element with the viewId individually!
$(viewId + ‘ button,’ + viewId + ‘ a,’ + viewId + ‘ submit,’ + viewId + ‘ i’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $(viewId).find(<span class="hljs-string">'*'</span>)
        .each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i, e</span>) </span>{
          <span class="hljs-keyword">if</span>($(<span class="hljs-keyword">this</span>).hasClass(<span class="hljs-string">'isEvent'</span>)) {
            $(<span class="hljs-keyword">this</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>.attr(‘id’, e.id+’_’+viewId)//NoHash)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            .click(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>$object.Start($id, par);
$object.Save();
console.log(“target name (jQuery): “ + $(e.target).attr(‘name’));
console.log(“target name (JS): “ + e.target.name);
e.target.name is not working on custom elements, such as</p>
<foobar href="#" name="clearAll" class="isEvent">
 Click me
</foobar>

            </div>
            
            <div class="content"><div class='highlight'><pre>              <span class="hljs-keyword">var</span> targetName = $(e.target).attr(<span class="hljs-string">'name'</span>); <span class="hljs-comment">// e.target.name</span>
              $object.Start(targetName, e);
              <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'preventDefault'</span>]) {
                e.preventDefault();
              }
            });
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>console.log(i + “ “ + e.id);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        });</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Start: Methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      <span class="hljs-comment">/**
       * Call the .Save() method whenever you want to save the object.
       * Notice: This is intended behaviour, but the implementation of the
       * method is up to the individual how and what is done when this method
       * is called/executed.
       *
       * @method Save
       * @param {Object} par Provide extra parameters if needed.
       * @return {Object} The object (itself)
       */</span>
      $object.Save = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">par</span>) </span>{
        <span class="hljs-keyword">return</span> $object.Start(<span class="hljs-string">'Save'</span>, par);
      };
      <span class="hljs-comment">/**
       * Call the .Update() method whenever you want to update the object.
       * Notice: This is intended behaviour, but the implementation of the
       * method is up to the individual how and what is done when this method
       * is called/executed.
       *
       * @method Update
       * @param {Object} par Provide extra parameters if needed.
       * @return {Object} The object (itself)
       */</span>
      $object.Update = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">par</span>) </span>{
        <span class="hljs-keyword">return</span> $object.Start(<span class="hljs-string">'Update'</span>, par);
      };
      <span class="hljs-comment">/**
       * Call the .Delete() method whenever you want to delete the object.
       * Notice: This is intended behaviour, but the implementation of the
       * method is up to the individual how and what is done when this method
       * is called/executed.
       *
       * @method Delete
       * @param {Object} par Provide extra parameters if needed.
       * @return {Object} The object (itself)
       */</span>
      $object.Delete = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">par</span>) </span>{
        <span class="hljs-keyword">return</span> $object.Start(<span class="hljs-string">'Delete'</span>, par);
      };

      <span class="hljs-comment">/**
       * Clear
       *
       * Clears a property's value in the Model and optionally in the View if 'isMirror' = true.
       *
       *
       * @method Clear
       * @return {Object} The object (itself)
       */</span>
      $object.Clear = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
        $object.Set(prop, <span class="hljs-string">''</span>);
        $object[prop] = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * Clear All
       *
       * Clears all the data in the Model and the View.
       *
       * @method ClearAll
       * @return {Object} The object (itself)
       */</span>
      $object.ClearAll = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        $.each($object.GetModelData(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
          $object.Clear(prop);
        });
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * AddGetSet
       *
       * Add getter and setter methods for a property
       *
       * Getters and Setters in JavaScript/JScript (ECMAScript) are not an option
       * as it is hard to make it work cross-browser/platform!
       * There is a solution here, but only down to IE9:
       * Source: http://javascriptweblog.wordpress.com/2010/11/15/extending-objects-with-javascript-getters/
       *
       * If changes in the model properties should be reflected in the view
       * then setter and getter methods will be attached using jQuery.
       *
       * Note: Will only be used(exec.) if 'isMirror' is TRUE.
       *
       * Works in IE 7+: http://jsfiddle.net/cTJZN/
       *
       * @method AddGetSet
       * @param {String} prop The object's property name
       * @param {Function} onUpdate callBack function will execute, whenever
       * the get/set event handlers bound with .bind() method are triggered.
       * @return {Object} The object (itself)
       */</span>
      $object.AddGetSet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{<span class="hljs-comment">//, onUpdate) {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>var prop = Common.FstChrUp(prop);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $($object)
          .bind(<span class="hljs-string">'get'</span>+prop, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event, ret</span>) </span>{
            ret[<span class="hljs-string">'value'</span>] = $object[prop];
          })
          .bind(<span class="hljs-string">'set'</span>+prop, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">event, newVal</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Replace the old value with the new value in the model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> oldVal = $object[prop];</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Only update values if they’re changed</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>(oldVal !== newVal) {
              $object[prop] = newVal;</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>alert(n + “: “ + ov + “=&gt;” + nv);
Update the view accordingly</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              $object.SetViewFromModel();</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Make sure that the input will have the change event triggered,
so that the views bound to this element will also be updated.
This is important in case the model is changed using setTimeout()
which will update the model, then this change must simulate
a user setting the value of the input.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              $object.TriggerEvent(prop, <span class="hljs-string">'change'</span>);<span class="hljs-comment">//.TriggerEvent(prop, 'keyup');</span></pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>alert(“OK”);
onUpdate(prop, oldVal, newVal);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            }
          });
          <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * RemoveGetSet
       *
       * Remove getter and setter methods for a property
       *
       * @method RemoveGetSet
       * @param {String} prop The object's property name
       * @return {Object} The object (itself)
       */</span>
      $object.RemoveGetSet = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
        $($object)
          .unbind(<span class="hljs-string">'get'</span>+prop)
          .unbind(<span class="hljs-string">'set'</span>+prop);

        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * Trigger Event
       *
       * Trigger an event on an input element inside the view
       *
       * @method TriggerEvent
       * @param {String} prop Property name
       * @param {String} evt Event type/name (e.g. 'keyup')
       * @return {Object} The object (itself)
       */</span>
      $object.TriggerEvent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop, evt</span>) </span>{
        $(viewId + <span class="hljs-string">' :input[name="'</span>+prop+<span class="hljs-string">'"]'</span>)
          .not(<span class="hljs-string">'.excludeFromModel'</span>)
          .trigger(evt);

        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * AddProperty
       *
       * Add a property to the Model
       *
       * @method AddProperty
       * @param {String} prop The property name
       * @return {Object} The object (itself)
       */</span>
      $object.AddProperty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop, value</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Add the propery to the Model</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $object[prop] = value;</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>console.log(“Add Property….”);
console.log($object);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $object</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>.AddEvents()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          .AddGetSet(prop);</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>.TriggerEvent(prop, ‘keyup’);
console.log(“Added property “ + prop + “ to the Model.”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * RemoveProperty
       *
       * Remove a property from the Model
       *
       * @method RemoveProperty
       * @param {String} prop The property name
       * @return {Object} The object (itself)
       */</span>
      $object.RemoveProperty = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
        $object.RemoveGetSet(prop);
        <span class="hljs-keyword">delete</span> $object[prop];</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>$object.Find(‘[name=”‘+prop+’”]’)
$(viewId + ‘ :input[name=”‘+prop+’”]’)
.not(‘.excludeFromModel’)
.remove();
console.log(“Removed property “ + prop + “ from the Model.”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-keyword">var</span> computedProperties = [];

      <span class="hljs-comment">/**
       * Set
       *
       * Notice: Must only be used if 'isMirror' is TRUE.
       *
       * When you need to update a value in the Model and reflect in the View.
       *
       * @method Set
       * @param {String} prop The object's property name
       * @param {String} value The new value to set for the property
       * @return {Object} The object (itself)
       */</span>
      $object.Set = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop, value</span>)</span>{
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
          computedProperties.push({ <span class="hljs-string">'name'</span>: prop, <span class="hljs-string">'func'</span>: value });
          value = value($object);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>console.log(“Set()”);
$(obj).trigger(‘set’+Common.FstChrUp(key), [val]);
$($object).triggerHandler(‘set’+prop, [value]); ?
Add property to model if it’s not there already.
Scenario: User has Model &amp; View without this property, but uses .Set()
to set a value in the Model &amp; View, then it should be added!
NOTE: isMirror should be TRUE !!! IMPORTANT !!! - by design.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>($object[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'isMirror'</span>] &amp;&amp; !$object.Has(prop)) {
          $object.AddProperty(prop, value);
        }
        $($object).triggerHandler(<span class="hljs-string">'set'</span>+prop, [value]);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>Update databound DOM values
Update databound elements with datasrc if specified, otherwise with viewId.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $object.SetDataboundDomVal(datasrc ? datasrc : viewId, prop, value);
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * Get
       *
       * Notice: Must only be used if 'isMirror' is TRUE.
       *
       * @method Get
       * @param {String} prop The object's property name.
       * @return {Object} value The value from the object's property.
       */</span>
      $object.Get = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p><a href="http://stackoverflow.com/questions/9145347/jquery-returning-value-from-trigger">http://stackoverflow.com/questions/9145347/jquery-returning-value-from-trigger</a>
console.log(“Get()”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> result = { value : <span class="hljs-literal">undefined</span> };</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>$($object).triggerHandler(‘get’+Common.FstChrUp(key), [result]);
$($object).triggerHandler(‘get’+prop, [result]); ?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $($object).triggerHandler(<span class="hljs-string">'get'</span>+prop, [result]);
        <span class="hljs-keyword">return</span> result[<span class="hljs-string">'value'</span>];
      };

      <span class="hljs-comment">/**
       * Has
       *
       * Checks if the Model has a given property (true) or not (false).
       *
       * @method Has
       * @param {String} prop The object's property name
       * @return {Boolean} TRUE if the property exists. Otherwise FALSE.
       */</span>
      $object.Has = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop</span>) </span>{
        <span class="hljs-keyword">if</span>($object.Get(prop) !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      };

      <span class="hljs-comment">/**
       * GetDatasrcId
       *
       * Return the (view) ID of the datasource.
       *
       * @method GetDatasrcId
       * @return {Number} The (View) ID of the datasource.
       */</span>
      $object.GetDatasrcId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> $object.datasrc;
      };

      <span class="hljs-comment">/**
       * GetModelData
       *
       * Return's a copy of the Model's data without it's functions.
       * Useful when storing the data.
       *
       * Note: As this object has all of it's functions/methods removed, then
       * it's not possible to use the .toArray() (if needed for any reason) anymore.
       * Instead use $.makeArray(theObject); which is what .toArray() uses.
       *
       * @method GetModelData
       * @param {Boolean} withSettings If TRUE, then append the settings object.
       * @return {Object} A copy of the Model's data (as JSON object literal).
       */</span>
      $object.GetModelData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">withSettings</span>) </span>{
        <span class="hljs-keyword">var</span> modelObjectData = {};
          $.each($object, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k, v</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Only add types which aren’t functions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>((<span class="hljs-keyword">typeof</span> v).toString() !== <span class="hljs-string">'function'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Don’t add the jQuery object which is use for .Set() &amp; .Get()
Regex test on Rubular: <a href="http://www.rubular.com/r/KZQH0gdHyy">http://www.rubular.com/r/KZQH0gdHyy</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>((<span class="hljs-regexp">/jQuery\d*/</span>).test(k)) {
              <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Only add the settings object if withSettings is TRUE.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!withSettings &amp;&amp; k === <span class="hljs-string">'settings'</span>) {
              <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Add strings and objects (JSON literals and Arrays)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">else</span> {
              modelObjectData[k] = v;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>console.log(k + “ is a “ + typeof v);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          }
        });
        <span class="hljs-keyword">return</span> modelObjectData;
      };

      <span class="hljs-comment">/**
       * GetViewHtml
       *
       * Returns the jQuery object.
       * @method GetViewHtml
       * @return {Object} jQuery object.
       */</span>
      $object.GetViewHtml = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> $<span class="hljs-keyword">this</span>;
      };


      <span class="hljs-comment">/**
       * GetViewData
       *
       * Return the View data as an JSON object literal.
       *
       * @method GetViewData
       * @return {Object} The View data as JSON object
       */</span>
      $object.GetViewData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>console.log(“GetViewData()”);
Get the values from the View (DOM)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> $(viewId).getSetHtml();
      };

      <span class="hljs-comment">/**
       * SetViewData
       *
       * Set the View data from the Model (does not update databound elments)
       *
       * @method SetViewData
       * @return {Object} The object (itself)
       */</span>
      $object.SetViewData = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>Set the values in the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $(viewId).getSetHtml($object);
      };

      <span class="hljs-comment">/**
       * SetViewFromModel
       *
       * Updates the elements in the View from the Model (including databound elements).
       *
       * @method SetViewFromModel
       */</span>
      $object.SetViewFromModel = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>console.log(“SetViewFromModel()”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $object.SetViewData();
        <span class="hljs-keyword">var</span> data = $object.GetModelData();</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>console.log(JSON.stringify(data));
Update the databound values!!!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $.each(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, newVal</span>) </span>{
          $object.SetDataboundDomVal(viewId, key, newVal);
        });
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * SetModelFromView
       *
       * Update the model and databound elements.
       *
       * This method is internally every time a 'change' and 'keyup' event occur
       * in form elements. This is part of the concept to always update the Model,
       * so it is synchronized with the View.
       *
       * It is possible to override the call to this method for the 'keyup' event
       * if it is implemented manually in the settings. Therefore it's important
       * to know that if overriding this event, but still want 'live' updating
       * of the Model to occur, then this method must be called from the custom
       * implementation of the 'keyup' event!
       *
       * @method SetModelFromView
       * @param {Boolean} updateDataboundValues TRUE | FALSE - If undefined or
       * true, databound elements inside and/or outside the the View will also
       * get updated. If false, then they won't.
       * @return {Object} The object (itself)
       */</span>
       $object.SetModelFromView = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Get the values from the View (DOM)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> data = $object.GetViewData();</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>alert(JSON.stringify(data));
Update the model using the View values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $.each(data, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, newVal</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>console.log(“SetModelFromView() - key: “ + key + “, value: “ + newVal);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> oldVal = $object[key];</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Only update values if they’re changed
Check the value of oldVal (not newVal)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">var</span> valType = <span class="hljs-keyword">typeof</span> oldVal;</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>newVal should not be null or undefined!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(oldVal !== newVal &amp;&amp; (newVal !== <span class="hljs-literal">undefined</span> || newVal !== <span class="hljs-literal">null</span>)) { <span class="hljs-comment">// &amp;&amp; typeof oldVal === typeof newVal) {</span></pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>console.log(‘oldVal’);
console.log(oldVal);
console.log(‘newVal’);
console.log(newVal);
console.log(“Key: “ + key + “\nOld value: “ + oldVal + “ (“ + typeof oldVal + “)\nNew value: “ + newVal + “ (“ + typeof newVal + “)”);
A problem arises when comparing object literals!!!
should valType (string, number, boolean, object, undefined, function)
be used for anything?
When the property has not been defined in the Model, but in the View
the value will be undefined and therefore also the type.
In some cases this should be handled differently!
if(valType === ‘string’ || valType === ‘number’ || valType === ‘boolean’ || valType === ‘object’ || valType === ‘undefined’) {
alert(key + “: “ + oldVal + “ changed to “ + newVal);
Update the model with the value from DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              $object[key] = newVal;</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>$object.Set(key, newVal);
if(updateDataboundValues === undefined || updateDataboundValues === true) {
alert(“OK”);
}
}
else {
 alert(“Missing implementation of primitive types in SetModelFromView() method for type: “ + valType);
}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          }</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Update databound DOM values even
when setting the values on .init() the databound items should ofcourse
get updated even if the model data is same as in the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          $object.SetDataboundDomVal(viewId, key, newVal);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Update computed properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $.each(computedProperties, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k,v</span>) </span>{
          $object.Set(v[<span class="hljs-string">'name'</span>], v[<span class="hljs-string">'func'</span>]($object));
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>Return the values in JSON format
return data;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * SetDataboundDomVal
       *
       * Update the databound elements inside or outside the View.
       *
       * @method SetDataboundDomVal
       * @param {String} datasrc A viewId.
       * @param {String} name An element's name.
       * @param {String} value A new value.
       * @return {Object} The object (itself)
       */</span>
      $object.SetDataboundDomVal = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">datasrc, name, value</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>console.log(“SetDataboundDomVal() “ + name + “ - “ + value);
The following works fine, except it breaks in IE&lt;9!!!
$(‘[datasrc=’+datasrc+’][name=’+name+’]’).text(value).val(value);
This works though:
console.log(counter + “ - datasrc: “ + datasrc + “ - name: “ + name + “ - value: “ + value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> browserVersion = navigator.appVersion;</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>IE 7 &amp; 8</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(browserVersion.indexOf(<span class="hljs-string">"MSIE 7."</span>) !== <span class="hljs-number">-1</span> || browserVersion.indexOf(<span class="hljs-string">"MSIE 8."</span>) !== <span class="hljs-number">-1</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>case: <span datasrc="#viewId" name="somename"></span></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          $(<span class="hljs-string">'div[datasrc="'</span>+datasrc+<span class="hljs-string">'"][name="'</span>+name+<span class="hljs-string">'"],p[datasrc="'</span>+datasrc+<span class="hljs-string">'"][name="'</span>+name+<span class="hljs-string">'"],span[datasrc="'</span>+datasrc+<span class="hljs-string">'"][name="'</span>+name+<span class="hljs-string">'"]'</span>).text(value);</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>case: <div datasrc="#viewId"><span name="somename"></span></div></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          $(<span class="hljs-string">'div[datasrc="'</span>+datasrc+<span class="hljs-string">'"],p[datasrc="'</span>+datasrc+<span class="hljs-string">'"],span[datasrc="'</span>+datasrc+<span class="hljs-string">'"]'</span>).find(<span class="hljs-string">'div[name="'</span>+name+<span class="hljs-string">'"],p[name="'</span>+name+<span class="hljs-string">'"],span[name="'</span>+name+<span class="hljs-string">'"]'</span>).text(value);
          $(<span class="hljs-string">'div[datasrc="'</span>+datasrc+<span class="hljs-string">'"],p[datasrc="'</span>+datasrc+<span class="hljs-string">'"],span[datasrc="'</span>+datasrc+<span class="hljs-string">'"]'</span>).find(<span class="hljs-string">'input[name="'</span>+name+<span class="hljs-string">'"]'</span>).val(value);
        }
        <span class="hljs-keyword">else</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>case: <span datasrc="#viewId" name="somename"></span></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">if</span>(value) {</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>console.log(“datasrc: “ + datasrc + “ - name: “ + name + “ - value: “ + value + “ - “ + $(‘<em>[datasrc</em>=”‘+datasrc+’”]’).find(‘[name*=”‘+name+’”]’).text());</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $(<span class="hljs-string">'*[datasrc="'</span>+datasrc+<span class="hljs-string">'"][name="'</span>+name+<span class="hljs-string">'"]'</span>).text(value);</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>case: <div datasrc="#viewId"><span name="somename"></span></div></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $(<span class="hljs-string">'*[datasrc="'</span>+datasrc+<span class="hljs-string">'"]'</span>).find(<span class="hljs-string">'*[name="'</span>+name+<span class="hljs-string">'"]'</span>).text(value);
            $(<span class="hljs-string">'*[datasrc="'</span>+datasrc+<span class="hljs-string">'"]'</span>).find(<span class="hljs-string">'*[name="'</span>+name+<span class="hljs-string">'"]'</span>).val(value);
          }
        }
        $(<span class="hljs-string">'input[datasrc="'</span>+datasrc+<span class="hljs-string">'"][name="'</span>+name+<span class="hljs-string">'"]'</span>).val(value);
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * FillSelect
       *
       * Fill select element with one or more option elements.
       *
       * @method FillSelect
       * @param {Array} prop The property name which holds an array of values
       * @param {String} text The text to be displayed in the option element
       * @param {String} value The value of the option element
       * @return {Object} The object (itself)
       */</span>
      $object.FillSelect = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">prop, text, value</span>) </span>{
        <span class="hljs-keyword">var</span> textIsFunction = text.substring(text.length<span class="hljs-number">-2</span>, text.length) === <span class="hljs-string">"()"</span>;
        <span class="hljs-keyword">var</span> valueIsFunction = value.substring(value.length<span class="hljs-number">-2</span>, value.length) === <span class="hljs-string">"()"</span>;
        <span class="hljs-keyword">var</span> items = $object.Get(prop);
        $.each($object.Find(<span class="hljs-string">'select[name*="'</span>+prop+<span class="hljs-string">'"]'</span>), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k2,select</span>) </span>{
          select = $(select);
          select.empty();
          $.each(items, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k, v</span>) </span>{
            <span class="hljs-keyword">var</span> txt = textIsFunction ? v[text.substring(<span class="hljs-number">0</span>, text.length<span class="hljs-number">-2</span>)]() : v[text];
            <span class="hljs-keyword">var</span> val = valueIsFunction ? v[value.substring(<span class="hljs-number">0</span>, value.length<span class="hljs-number">-2</span>)]() : v[value];
            select.append($(<span class="hljs-string">'&lt;option /&gt;'</span>).attr({<span class="hljs-string">'value'</span>: val}).text(txt));
          });
        });
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * RunEvent
       *
       * Trigger an event if specified in the settings.
       *
       * @method RunEvent
       * @param {String} event The eventName to trigger/execute.
       * @return {Object} The object (itself)
       */</span>
      $object.RunEvent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
        <span class="hljs-keyword">var</span> targetName = event.target.name;
        <span class="hljs-keyword">var</span> targetValue = event.target.value;</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>alert(targetName);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> type = event.type;
        <span class="hljs-keyword">if</span>(type === <span class="hljs-literal">undefined</span>) {
          type = event;
        }
        <span class="hljs-keyword">if</span>(event === <span class="hljs-literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>console.log(‘event “e” is undefined!’);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span>($.trim(targetName).length &gt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'settings'</span>][type] !== <span class="hljs-literal">undefined</span> &amp;&amp; $settings[<span class="hljs-string">'settings'</span>][type] !== <span class="hljs-literal">null</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>alert($settings[‘settings’][type]);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $settings[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'eventUsed'</span>] = type;
            <span class="hljs-keyword">var</span> modelData = $object[targetName];
            <span class="hljs-keyword">var</span> selectedModelData = modelData;</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>select element (list)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>(event.target.type.indexOf(<span class="hljs-string">'select'</span>) !== <span class="hljs-number">-1</span>) {
              <span class="hljs-keyword">var</span> selectedIndex = event.target.selectedIndex;
              targetValue = event.target.options[selectedIndex].value;
              selectedModelData = modelData[selectedIndex];
            }
            $settings[<span class="hljs-string">'settings'</span>][type](event, targetName, targetValue, $object, modelData, selectedModelData);
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"source element has no name attribute assigned (required!)"</span>);
        }
        <span class="hljs-keyword">return</span> $object;
      };

      $object.RunCtr = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method, par</span>) </span>{
        $object.Start(method, par);
      };

      <span class="hljs-comment">/**
       * Start
       *
       * Execute a method in the controller.
       *
       * @method Start
       * @param {String} method The methods name specified in the controller.
       * @param {Object} par If needed you can provide optional parameters.
       * @return {Object} The object (itself)
       */</span>
      $object.Start = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">method, par</span>) </span>{
        <span class="hljs-keyword">var</span> exec;
        <span class="hljs-keyword">if</span>($object[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'controller'</span>] !== <span class="hljs-literal">undefined</span>) {
          exec = $object[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'controller'</span>][method];
        }
        <span class="hljs-keyword">if</span>(exec === <span class="hljs-literal">undefined</span>) {
          exec = $object[method];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>console.log(exec);
console.log($object[method]);
console.log(par);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(exec !== <span class="hljs-literal">undefined</span> &amp;&amp; exec !== <span class="hljs-literal">null</span>) {
          exec(par, $object);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Missing '</span> + method + <span class="hljs-string">'() method!'</span>);
        }
        <span class="hljs-keyword">return</span> $object;
      };

      <span class="hljs-comment">/**
       * toArray
       *
       * Convert the object to a real Array.
       *
       * @method toArray
       * @return {Array} The object converted into a real Array.
       */</span>
      $object.toArray = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> $.makeArray($object);
      };

      <span class="hljs-comment">/**
       * GetViewId
       *
       * Get the ID of the View
       *
       * @method GetViewId
       * @return {String} The View ID
       */</span>
      $object.GetViewId = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> $object[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'viewId'</span>];
      };

      <span class="hljs-comment">/**
       * Find
       *
       * Find and return one or many element/s within the View using a (id or class) selector.
       *
       * If the elemenet is not found an empty array is returned.
       *
       * @method Find
       * @return {Array} An element from the View.
       */</span>
      $object.Find = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">selector</span>) </span>{
        <span class="hljs-keyword">return</span> $($object.GetViewId() + <span class="hljs-string">' '</span> + selector);
      };

      <span class="hljs-comment">/**
       * AddEvents
       *
       * Add events to the object's input fields
       *
       * @method AddEvents
       * @return {Object} The object
       */</span>
      $object.AddEvents = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>Update the model view, whenever a change occurs</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $(viewId + <span class="hljs-string">' :input'</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>.not(‘.excludeFromModel’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          .focus(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p><a href="http://jsfiddle.net/PKVVP/">http://jsfiddle.net/PKVVP/</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $object.RunEvent(e);
          })
          .blur(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            $object.RunEvent(e);
          })
          .change(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>Update the model and also the databound elements
MVC.SetModelFromView(viewId, $object); //Always do this (core concept!)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $object.SetModelFromView(); <span class="hljs-comment">//Always do this (core concept!)</span></pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>console.log($object.GetModelData());</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $object.RunEvent(e);
          })
          .select(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            $object.RunEvent(e);
          })
          .submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
            $object.RunEvent(e);
          })
          <span class="hljs-comment">/**
           * keyup event
           *
           * It's important to know that when overriding this event,
           * but still want 'live' updating of the Model to occur,
           * then this method must be called from the custom implementation
           * of the 'keyup' event!
           *
           * @event keyup ...
           *
           */</span>
          .keyup(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>console.log(“keyup”);
If the ‘keyup’ event hasn’t been specified in the settings, then
by default update the Model and databound values using the
SetModelFromView() method</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'settings'</span>][<span class="hljs-string">'keyup'</span>] === <span class="hljs-literal">undefined</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>$object.SetDataboundDomVal(viewId, e.target.name, e.target.value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>              $object.SetModelFromView();
            }
            $object.RunEvent(e); <span class="hljs-comment">//e should euqal 'change'</span>
            <span class="hljs-comment">/*var n = $(this).attr('name');
            var v = $(this).val();
            MVC.SetDataboundDomVal(viewId, n, v);*/</span>
          })
          .keypress(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            $object.RunEvent(e);
          })
          .keydown(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            $object.RunEvent(e);
          });
          <span class="hljs-keyword">return</span> $object;
      };</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>END: Internal methods</p>

            </div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>START: Setup</p>

            </div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>Set the DOM values from the Model
MVC.SetViewFromModel(viewId, $object);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $object.SetViewFromModel();</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>Initialize the View with the Model data if they aren’t specified in the Model
MVC.SetModelFromView(viewId, $object);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $object.SetModelFromView();</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>If Model property changes should be reflected/displayed in the View:
Loop throught the properties within the object and attach events using the
jQuery .bind() method. Whenever the user wants to update a value it can
be achieved using the .trigger() method, which is implemented in the
MVC.Set() and MVC.Get() methods.
Note: Changing the Model’s properties directly won’t update the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>($settings[<span class="hljs-string">'isMirror'</span>]) {</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>alert(“reflect on”);
Loop throught the object’s properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $.each($object.GetModelData(), <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k,v</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>console.log(k + “ : “ + v);
var pars = MVC.GetViewData(viewId);
Add the Getter and Setter methods
n: name, ov: old value, nv: new value
MVC.AddGetSet($object, k, function(n, ov, nv) {</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          $object.AddGetSet(k);
          <span class="hljs-comment">/*, function(n, ov, nv) {
</span></pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>alert(n + “: “ + ov + “=&gt;” + nv);
Update the view accordingly
MVC.SetViewFromModel(viewId, $object); //$(viewId).getSetHtml($object);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $object.SetViewFromModel();</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Make sure that the input will have the change event triggered,
so that the views bound to this element will also be updated.
This is important in case the model is changed using setTimeout()
which will update the model, then this change must simulate
a user setting the value of the input.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            $(':input[name='+n+']').not('.excludeFromModel').trigger('change');
          });*/
        });
      }

      if($settings['autoSaveInterval'] &gt; 0) {
        $settings['eventUsed'] = '"autoSave"';
        setInterval(function() {
          $object.Save();
        }, $settings['autoSaveInterval']);
      }

      $object.AddEvents();</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Add the settings to the Model object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $settings = { settings : $settings };</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>$.extend($object, $settings);
Add the data to the Model object
$data = { data : $data };</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      $.extend($object, $settings);</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>alert(JSON.stringify($object, null, 2));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

      <span class="hljs-comment">/**
       * To keep the code which belongs to the object, but normally would be
       * placed after object instantiation, we isntead want to place it inside
       * the .init() method, which gets executed 1ms after the object has been
       * created.
       *
       * Why we use setTimeout: read below...
       *
       * In some cases the user wants to call the object itself like this:
       *
       *
       * //Create a new object
       * obj = MVC.ModelView('#viewId', {
       *   //Data:
       *   foo : 'bar',
       *   //Method
       *   aCustomMethod : function() {
       *    //does something
       *   }
       *   init : function() {
       *     //All methods and other 'stuff' placed inside the .init() method
       *     //gets executed immediately after the object has been created (setup).
       *     //Therefore it's important (and necessary) to use setTimeout, as the
       *     //object actually hasn't been created yet. So we set it to 1 ms!
       *     obj.aCustomMethod();
       *   }
       * }
       * });
       */</span>
      <span class="hljs-keyword">var</span> init = $object[<span class="hljs-string">'init'</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>Do not run the .init() method if it is undefined or null!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">if</span>(init !== <span class="hljs-literal">undefined</span> &amp;&amp; init !== <span class="hljs-literal">null</span>) {
        setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
          init($object);
        }, <span class="hljs-number">1</span>);
      }
      <span class="hljs-keyword">return</span> $object;</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>}
End</p>

            </div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>return $this;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    }
  });
})(jQuery);
<span class="hljs-comment">/**
 * Get or set HTML (DOM) values
 *
 * Inspired by formParams: http://jquerypp.com/#formparams
 *
 * @param {Object} jQuery
 * @class getSetHtml
 */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> $ </span>) </span>{
  $.fn.extend({
    <span class="hljs-comment">/**
     * getSetHtml
     *
     *
     * Get or set HTML (DOM) values.
     * If you pass this method any parameters it will try to set the HTML.
     * Otherwise it will try get the HTML values from the view.
     *
     *
     * @param  {Object} params Object literal with keys that correspond with
     * either an ID or NAME attribute of an element in the View (DOM).
     * @return {Object} Object literal with data from the View (DOM).
     *
     * @method getSetHtml
     */</span>
    getSetHtml: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> params </span>) </span>{
      <span class="hljs-keyword">if</span>(params !== <span class="hljs-literal">undefined</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.setValues(params);
      }
      <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getValues();
      }
    },
    getInputElements : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) </span>{
      <span class="hljs-keyword">return</span> target.find(<span class="hljs-string">'input,select,textarea'</span>).not(<span class="hljs-string">'.excludeFromModel'</span>);
    },
    getElementKey : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">element</span>) </span>{
      <span class="hljs-keyword">var</span> key = $(element).attr(<span class="hljs-string">"datafld"</span>);
      <span class="hljs-keyword">if</span>(key === <span class="hljs-literal">undefined</span>) {
        key = $(element).attr(<span class="hljs-string">"id"</span>);
      }
      <span class="hljs-keyword">if</span>(key === <span class="hljs-literal">undefined</span>) {
        key = $(element).attr(<span class="hljs-string">"data-bind"</span>);
      }
      <span class="hljs-keyword">return</span> key;</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>return $(element).attr(“datafld”) ? undefined : $(element).attr(“id”);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    },
    getBindableElements : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">target</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>return target.find(‘p,span,div’).filter(‘:not(.excludeFromModel)’);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> target.find(<span class="hljs-string">'*[data-bind], *[datafld]'</span>).filter(<span class="hljs-string">':not(.excludeFromModel)'</span>);
    },
    setValues : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">params</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>console.log(‘setValues called!’);
console.log(this.getBindableElements(this));
Set the values for  ‘p’, ‘div’ and ‘span’ elements</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = <span class="hljs-keyword">this</span>;
      $<span class="hljs-keyword">this</span>.getBindableElements(<span class="hljs-keyword">this</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> key = $<span class="hljs-keyword">this</span>.getElementKey(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">if</span>(key === <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">return</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>alert(key);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> value = params[key];</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>alert(key + “ = “ + value);
console.log(value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        $(<span class="hljs-keyword">this</span>).html(value);</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>var toReplace = $.trim($(this).text());
alert(toReplace);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      });

      $<span class="hljs-keyword">this</span>.getInputElements(<span class="hljs-keyword">this</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">var</span> value = params[ $(<span class="hljs-keyword">this</span>).attr(<span class="hljs-string">"name"</span>) ], $<span class="hljs-keyword">this</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Don’t do all this work if there’s no value</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( value !== <span class="hljs-literal">undefined</span>) {
          $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);

          <span class="hljs-keyword">if</span> ( $<span class="hljs-keyword">this</span>.is(<span class="hljs-string">":radio"</span>) ) {
            <span class="hljs-keyword">if</span> ( $<span class="hljs-keyword">this</span>.val() === value ) {
              $<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">"checked"</span>, <span class="hljs-literal">true</span>);
            }
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( $<span class="hljs-keyword">this</span>.is(<span class="hljs-string">":checkbox"</span>) ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Convert single value to an array to reduce
complexity</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span>(value) {
              $<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">"checked"</span>, <span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">else</span> {
              value = $.isArray( value ) ? value : [value];
              <span class="hljs-keyword">if</span> ( $.inArray( $<span class="hljs-keyword">this</span>.val(), value ) &gt; <span class="hljs-number">-1</span>) {
                $<span class="hljs-keyword">this</span>.attr(<span class="hljs-string">"checked"</span>, <span class="hljs-literal">true</span>);
              }
            }
            $<span class="hljs-keyword">this</span>.val( value );
          } <span class="hljs-keyword">else</span> {
            $<span class="hljs-keyword">this</span>.val( value );
          }
        }
      });

    },
    getValues : <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> data = {},
          formData = {};
      <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = <span class="hljs-keyword">this</span>;
      $<span class="hljs-keyword">this</span>.getInputElements(<span class="hljs-keyword">this</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> elm = $(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">var</span> type = elm.attr(<span class="hljs-string">'type'</span>),
            name = elm.attr(<span class="hljs-string">'name'</span>),
            value = elm.val();
        <span class="hljs-keyword">if</span>(type === <span class="hljs-string">'submit'</span> || !name) {
          <span class="hljs-keyword">return</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>console.log(“type: “ + type + “ - name: “ + name + “ - value: “ + value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span>(elm.hasClass(<span class="hljs-string">'isNumber'</span>)) {
          value = <span class="hljs-built_in">parseInt</span>(value, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-keyword">if</span>(elm.is(<span class="hljs-string">':checkbox'</span>)) {
          value = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">if</span>(elm.attr(<span class="hljs-string">'checked'</span>) || elm.prop(<span class="hljs-string">'checked'</span>)) {
            value = <span class="hljs-literal">true</span>;
          }
          formData[name] = value;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(elm.is(<span class="hljs-string">':radio'</span>)) {
          <span class="hljs-keyword">if</span>(elm.attr(<span class="hljs-string">'checked'</span>) || elm.prop(<span class="hljs-string">'checked'</span>)) {
            formData[name] = value;
          }
        }
        <span class="hljs-keyword">else</span> {
          formData[name] = value;
        }
      });

      $<span class="hljs-keyword">this</span>.getBindableElements(<span class="hljs-keyword">this</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> elem = $(<span class="hljs-keyword">this</span>);
        <span class="hljs-keyword">var</span> value = elem.text();
        <span class="hljs-keyword">if</span>(value !== <span class="hljs-literal">undefined</span>) {
          <span class="hljs-keyword">var</span> key = $<span class="hljs-keyword">this</span>.getElementKey(<span class="hljs-keyword">this</span>);
          <span class="hljs-keyword">if</span>(key === <span class="hljs-literal">undefined</span>) {
            <span class="hljs-keyword">return</span>;
          }
          <span class="hljs-keyword">if</span>(elem.hasClass(<span class="hljs-string">'isNumber'</span>)) {
            value = <span class="hljs-built_in">parseInt</span>(value, <span class="hljs-literal">null</span>);
          }</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>alert(key + “ = “ + value);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>          data[key] = value;
        }
      });
      $.extend(data, formData);</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>alert(CMN.JSON.stringify(data, null, 2));</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-keyword">return</span> data;
    }
  });
})(jQuery);</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p><a href="http://stackoverflow.com/questions/1038746/equivalent-of-string-format-in-jquery/2648463#2648463">http://stackoverflow.com/questions/1038746/equivalent-of-string-format-in-jquery/2648463#2648463</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-built_in">String</span>.prototype.format = <span class="hljs-built_in">String</span>.prototype.f = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> s = <span class="hljs-keyword">this</span>,
      i = <span class="hljs-built_in">arguments</span>.length;
  <span class="hljs-keyword">while</span> (i--) {
      s = s.replace(<span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(<span class="hljs-string">'\\{'</span> + i + <span class="hljs-string">'\\}'</span>, <span class="hljs-string">'gm'</span>), <span class="hljs-built_in">arguments</span>[i]);
  }
  <span class="hljs-keyword">return</span> s;
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
