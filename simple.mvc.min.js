var MVC={KeyCheck:function(d,a){if(13===d.keyCode&&"enter"===a|NaN||27===d.keyCode&&"escape"===a)return!0},List:function(d){if(void 0===d||null===d)d=[];d.Add=function(a){d.push(a);return d};d.Remove=function(a){a=d.indexOf(a);return-1!==a?(d.splice(a,1),!0):!1};d.Find=function(a){for(var c=[],e=d.indexOf(a);-1!=e;)c.push(e),e=d.indexOf(a,++e)};return d},Controller:function(d){return d},ModelView:function(d,a,c){if(null===a||void 0===a)a={};if(null===c||void 0===c)c={};var e=c.clone;if(void 0!==e){e.template=
d;var d=e.id,f=d.substring(1,d.length),f=$($(e.template).clone(e.withDataAndEvents)).attr("id",f);$(f).find('[datasrc=""]').attr("datasrc",d);e.append(f)}void 0===c.viewId&&$.extend(c,{viewId:d});void 0===c.reflectModelChangeInView&&$.extend(c,{reflectModelChangeInView:!0});void 0===c.eventUsed&&$.extend(c,{eventUsed:""});$(d+" button,"+d+" a,"+d+" submit,"+d+" i").each(function(){$(this).click(function(b){a.RunCtr(b.target.name)})});a.Save=function(b){a.RunCtr("Save",b);return a};a.Update=function(b){a.RunCtr("Update",
b);return a};a.Delete=function(b){a.RunCtr("Delete",b);return a};a.Clear=function(b){a.Set(b,"");return a};a.ClearAll=function(){return a};a.AddGetSet=function(b){$(a).bind("get"+b,function(d,c){c.value=a[b]}).bind("set"+b,function(c,d){a[b]!==d&&(a[b]=d,a.SetViewFromModel(),a.triggerEvent(b,"change"))});return a};a.RemoveGetSet=function(b){$(a).unbind("get"+b).unbind("set"+b);return a};a.triggerEvent=function(b,c){$(d+' :input[name="'+b+'"]').not(".excludeFromModel").trigger(c);return a};a.AddProperty=
function(b){a.AddEvents().AddGetSet(b).triggerEvent(b,"keyup");console.log("Added property "+b+" to the Model.");return a};a.RemoveProperty=function(b){a.RemoveGetSet(b);delete a[b];$(d+' :input[name="'+b+'"]').not(".excludeFromModel").remove();console.log("Removed property "+b+" from the Model.");return a};a.Set=function(b,c){$(a).triggerHandler("set"+b,[c]);a.SetDataboundDomVal(d,b,c);return a};a.Get=function(b){var c={value:void 0};$(a).triggerHandler("get"+b,[c]);return c.value};a.GetViewData=
function(){return $(d).getSetHtml()};a.SetViewFromModel=function(){$(d).getSetHtml(a);return a};a.SetModelFromView=function(){var b=a.GetViewData();$.each(b,function(b,c){a[b]!==c&&(a[b]=c,a.SetDataboundDomVal(d,b,c))});return a};a.SetDataboundDomVal=function(b,c,d){$("div[datasrc|="+b+"][name|="+c+"],p[datasrc|="+b+"][name|="+c+"],span[datasrc|="+b+"][name|="+c+"]").text(d);$("input[datasrc|="+b+"][name|="+c+"]").val(d);return a};a.RunEvent=function(b){var d=b.type;void 0===d&&(d=b);if(void 0!==
b)return 0<$.trim(b.target.name).length?void 0!==c.settings[d]&&null!==c.settings[d]&&(c.settings.eventUsed=d,c.settings[d](b,b.target.name,b.target.value)):console.log("source element has no name attribute assigned (required!)"),a};a.RunCtr=function(b,c){var d=a.settings.controller[b];void 0!==d&&null!==d?d(c):console.log("Missing "+b+"() method!");return a};a.toArray=function(){return $.makeArray(a)};a.GetViewId=function(){return a.settings.viewId};a.FindElement=function(b){return $(a.GetViewId()+
" "+b)};a.AddEvents=function(){$(d+" :input").not(".excludeFromModel").focus(function(b){a.RunEvent(b)}).blur(function(b){a.RunEvent(b)}).change(function(b){a.SetModelFromView();a.RunEvent(b)}).select(function(b){a.RunEvent(b)}).submit(function(b){a.RunEvent(b)}).keyup(function(b){void 0===c.settings.keyup&&a.SetModelFromView();a.RunEvent(b)}).keypress(function(b){a.RunEvent(b)}).keydown(function(b){a.RunEvent(b)}).mouseenter(function(b){a.RunEvent(b)}).mouseleave(function(b){a.RunEvent(b)});return a};
a.SetViewFromModel();a.SetModelFromView();c.reflectModelChangeInView&&$.each(a,function(b){a.AddGetSet(b)});0<c.autoSaveInterval&&(c.eventUsed='"autoSave"',setInterval(function(){a.Save()},c.autoSaveInterval));a.AddEvents();c={settings:c};$.extend(a,c);var g=a.init;void 0!=g&&null!==g&&setTimeout(function(){g()},1);return a}};
(function(d){d.fn.extend({getSetHtml:function(a){return void 0!==a?this.setValues(a):this.getValues()},getInputElements:function(a){return a.find("input,select,textarea").filter(":not(.excludeFromModel)")},getElementKey:function(a){var c=d(a).attr("datafld");void 0===c&&(c=d(a).attr("id"));return c},getDivElements:function(a){return a.find("p,span,div").filter(":not(.excludeFromModel)")},setValues:function(a){$this=this;$this.getDivElements(this).each(function(){var c=$this.getElementKey(this);void 0!==
c&&(c=a[c],d(this).html(c))});$this.getInputElements(this).each(function(){var c=a[d(this).attr("name")],e;void 0!==c&&(e=d(this),e.is(":radio")?e.val()===c&&e.attr("checked",!0):(e.is(":checkbox")&&(c?e.attr("checked",!0):(c=d.isArray(c)?c:[c],-1<d.inArray(e.val(),c)&&e.attr("checked",!0))),e.val(c)))})},getValues:function(){var a={},c={};$this=this;$this.getInputElements(this).each(function(){var a=d(this),f=a.attr("type"),g=a.attr("name"),b=a.val();"submit"!==f&&g&&(a.hasClass("isNumber")&&(b=
parseInt(b)),a.is(":checkbox")?(b=!1,a.attr("checked")&&(b=!0),c[g]=b):a.is(":radio")?a.attr("checked")&&(c[g]=b):c[g]=b)});$this.getDivElements(this).each(function(){var c=d(this),f=c.text();if(void 0!==f){var g=$this.getElementKey(this);void 0!==g&&(c.hasClass("isNumber")&&(f=parseInt(f)),a[g]=f)}});d.extend(a,c);return a}})})(jQuery);