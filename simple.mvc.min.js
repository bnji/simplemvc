var MVC={Controller:function(d){return d},ModelView:function(d,a,c){if(null===a||void 0===a)a={};if(null===c||void 0===c)c={};var e=c.clone;if(void 0!==e){e.template=d;var d=e.id,f=d.substring(1,d.length),f=$($(e.template).clone(e.withDataAndEvents)).attr("id",f);$(f).find(d+' div[datasrc=""],p[datasrc=""],span[datasrc=""]').attr("datasrc",d);e.append(f)}void 0===c.viewId&&$.extend(c,{viewId:d});void 0===c.reflectModelChangeInView&&$.extend(c,{reflectModelChangeInView:!0});void 0===c.eventUsed&&$.extend(c,
{eventUsed:""});$(d+" button,a,submit,i").each(function(){$(this).click(function(b){a.ExecuteController(b.target.name)})});a.Save=function(b){a.ExecuteController("Save",b);return a};a.Update=function(b){a.ExecuteController("Update",b);return a};a.Delete=function(b){a.ExecuteController("Delete",b);return a};a.Clear=function(b){a.Set(b,"");return a};a.ClearAll=function(){return a};a.AddGetSet=function(b){$(a).bind("get"+b,function(c,d){d.value=a[b]}).bind("set"+b,function(c,d){a[b]!==d&&(a[b]=d,a.SetViewFromModel(),
a.triggerEvent(b,"change"))});return a};a.RemoveGetSet=function(b){$(a).unbind("get"+b).unbind("set"+b);return a};a.triggerEvent=function(b,c){$(d+" :input[name="+b+"]").not(".excludeFromModel").trigger(c);return a};a.AddProperty=function(b){a.AddEvents().AddGetSet(b).triggerEvent(b,"keyup");console.log("Added property "+b+" to the Model.");return a};a.RemoveProperty=function(b){a.RemoveGetSet(b);delete a[b];$(d+' :input[name="'+b+'"]').remove();console.log("Removed property "+b+" from the Model.");
return a};a.Set=function(b,c){$(a).triggerHandler("set"+b,[c]);a.SetDataboundDomVal(d,b,c);return a};a.Get=function(b){var c={value:void 0};$(a).triggerHandler("get"+b,[c]);return c.value};a.GetViewData=function(){return $(d).getSetHtml()};a.SetViewFromModel=function(){$(d).getSetHtml(a);return a};a.SetModelFromView=function(){var b=a.GetViewData();$.each(b,function(b,c){a[b]!==c&&(a[b]=c,a.SetDataboundDomVal(d,b,c))});return a};a.SetDataboundDomVal=function(b,c,d){$("div[datasrc|="+b+"][name|="+
c+"],p[datasrc|="+b+"][name|="+c+"],span[datasrc|="+b+"][name|="+c+"]").text(d);$("input[datasrc|="+b+"][name|="+c+"]").val(d);return a};a.RunEvent=function(b){var d=b.type;void 0===d&&(d=b);if(void 0!==b)return 0<$.trim(b.target.name).length?void 0!==c.settings[d]&&null!==c.settings[d]&&(c.settings.eventUsed=d,console.log(d),c.settings[d](b,b.target.name,b.target.value)):console.log("source element has no name attribute assigned (required!)"),a};a.ExecuteController=function(b,c){var d=a.settings.controller[b];
void 0!==d&&null!==d?d(a,c):console.log("Missing "+b+"() method!");return a};a.toArray=function(){return $.makeArray(a)};a.AddEvents=function(){$(d+" :input").not(".excludeFromModel").focus(function(b){a.RunEvent(b)}).blur(function(b){a.RunEvent(b)}).change(function(b){a.SetModelFromView();a.RunEvent(b)}).select(function(b){a.RunEvent(b)}).submit(function(b){a.RunEvent(b)}).keyup(function(b){void 0===c.settings.keyup&&a.SetModelFromView();a.RunEvent(b)}).keypress(function(b){a.RunEvent(b)}).keydown(function(b){a.RunEvent(b)});
return a};a.SetViewFromModel();a.SetModelFromView();c.reflectModelChangeInView&&$.each(a,function(b){a.AddGetSet(b)});0<c.autoSaveInterval&&(c.eventUsed='"autoSave"',setInterval(function(){a.Save()},c.autoSaveInterval));a.AddEvents();c={settings:c};$.extend(a,c);return a}};
(function(d){d.fn.extend({getSetHtml:function(a){return void 0!==a?this.setValues(a):this.getValues()},getInputElements:function(a){return a.find("input,select,textarea").filter(":not(.excludeFromModel)")},getElementKey:function(a){var c=d(a).attr("datafld");void 0===c&&(c=d(a).attr("id"));return c},getDivElements:function(a){return a.find("p,span,div").filter(":not(.excludeFromModel)")},setValues:function(a){$this=this;$this.getDivElements(this).each(function(){var c=$this.getElementKey(this);void 0!==
c&&(c=a[c],d(this).text(c))});$this.getInputElements(this).each(function(){var c=a[d(this).attr("name")],e;void 0!==c&&(e=d(this),e.is(":radio")?e.val()===c&&e.attr("checked",!0):(e.is(":checkbox")&&(c=d.isArray(c)?c:[c],-1<d.inArray(e.val(),c)&&e.attr("checked",!0)),e.val(c)))})},getValues:function(){var a={},c={};$this=this;$this.getInputElements(this).each(function(){var a=d(this),f=a.attr("type"),b=a.attr("name"),g=a.val();"submit"!==f&&b&&(a.hasClass("isNumber")&&(g=parseInt(g)),a.is(":checkbox")?
(g=!1,a.attr("checked")&&(g=!0),c[b]=g):a.is(":radio")?a.attr("checked")&&(c[b]=g):c[b]=g)});$this.getDivElements(this).each(function(){var c=d(this),f=c.text();if(void 0!==f){var b=$this.getElementKey(this);void 0!==b&&(c.hasClass("isNumber")&&(f=parseInt(f)),a[b]=f)}});d.extend(a,c);return a}})})(jQuery);