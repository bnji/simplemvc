var ViewModel={Update:function(a,c,b){$(a).trigger("set"+Common.FirstCharToUpper(c),[b])},Create:function(a,c,b,d){b&&$.each(c,function(b){ViewModel.AttachGetterSetter(c,b,function(b){$(a).getSetHtml(c);$(":input[name="+b+"]").not(".excludeFromModel").trigger("change")})});$(a).getSetHtml(c);ViewModel.GetDomVal(a,c);$(a+" :input").not(".excludeFromModel").change(function(){ViewModel.GetDomVal(a,c);$(this).attr("name");$(a).getSetHtml();void 0!==d&&null!==d&&d()}).keyup(function(){var b=$(this).attr("name"),
c=$(this).val();ViewModel.SetDomVal(a,b,c)});return c},AttachGetterSetter:function(a,c,b){var d=Common.FirstCharToUpper(c);$(a).bind("get"+d,function(){return a[c]});$(a).bind("set"+d,function(d,f){var g=a[c];a[c]=f;b(c,g,f)})},GetDomVal:function(a,c){var b=$(a).getSetHtml();$.each(b,function(b,e){c[b]=e;ViewModel.SetDomVal(a,b,e)});return b},SetDomVal:function(a,c,b){$(document).find("[datasrc="+a+"][name="+c+"]").html(b).val(b)}},Common={FirstCharToUpper:function(a){return a.substring(0,1).toUpperCase()+
a.substring(1,a.length)}};
(function(a){a.fn.extend({getSetHtml:function(a){return void 0!==a?this.setValues(a):this.getValues()},getInputElements:function(a){return a.find("input,button,select").filter(":not(.excludeFromModel)")},getDivElements:function(a){return a.find("p,span,div").filter(":not(.excludeFromModel)")},setValues:function(c){console.log("setValues called!");this.getDivElements(this).each(function(){var b=a(this).attr("datafld");void 0===b&&(b=a(this).attr("id"));void 0!==b&&(b=c[b],a(this).html(b))});this.getInputElements(this).each(function(){var b=
c[a(this).attr("name")],d;void 0!==b&&(d=a(this),d.is(":radio")?d.val()===b&&d.attr("checked",!0):(d.is(":checkbox")&&(b=a.isArray(b)?b:[b],-1<a.inArray(d.val(),b)&&d.attr("checked",!0)),d.val(b)))})},getValues:function(){var c={},b={};this.getInputElements(this).each(function(){var c=a(this),e=c.attr("type"),f=c.attr("name"),g=c.val();"submit"!==e&&f&&(c.is(":checkbox")?(g=!1,c.attr("checked")&&(g=!0),b[f]=g):c.is(":radio")?c.attr("checked")&&(b[f]=g):b[f]=g)});this.getDivElements(this).each(function(){var b=
a(this).html();if(void 0!==b){var e=a(this).attr("datafld");void 0===e&&(e=a(this).attr("id"));void 0!==e&&(c[e]=b)}});return c=a.extend({},c,b)}})})(jQuery);